{
    "modules": [
        {
            "id": "6728609a-9707-41f7-a87c-30ac1fde4f4c",
            "type": "StartMediaStreaming",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "e7825b58-a9db-4935-9f83-e67a564176e8"
                },
                {
                    "condition": "Error",
                    "transition": "410057d0-9390-486b-bbb4-c4def2a7367c"
                }
            ],
            "parameters": [
                {
                    "name": "Track",
                    "value": "FromCustomer"
                },
                {
                    "name": "Track",
                    "value": "ToCustomer"
                },
                {
                    "name": "MediaStreamTypes",
                    "value": "Audio"
                }
            ],
            "metadata": {
                "position": {
                    "x": 129,
                    "y": 214
                },
                "fromCustomer": true,
                "toCustomer": true
            }
        },
        {
            "id": "410057d0-9390-486b-bbb4-c4def2a7367c",
            "type": "PlayPrompt",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "99458f47-6941-48ce-9b90-fdf184759b22"
                }
            ],
            "parameters": [
                {
                    "name": "Text",
                    "value": "An error occurred when we tried to start streaming.",
                    "namespace": null
                },
                {
                    "name": "TextToSpeechType",
                    "value": "text"
                }
            ],
            "metadata": {
                "position": {
                    "x": 507,
                    "y": 326
                },
                "useDynamic": false
            }
        },
        {
            "id": "3f9659a3-56a5-4f3c-a431-fd9da2306459",
            "type": "PlayPrompt",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "99458f47-6941-48ce-9b90-fdf184759b22"
                }
            ],
            "parameters": [
                {
                    "name": "Text",
                    "value": "An error occurred with the KVS trigger lambda function.",
                    "namespace": null
                },
                {
                    "name": "TextToSpeechType",
                    "value": "text"
                }
            ],
            "metadata": {
                "position": {
                    "x": 355,
                    "y": 558
                },
                "useDynamic": false
            }
        },
        {
            "id": "e7825b58-a9db-4935-9f83-e67a564176e8",
            "type": "SetAttributes",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "97a964a7-5dd2-4c82-b21f-173b209be8a7"
                },
                {
                    "condition": "Error",
                    "transition": "97a964a7-5dd2-4c82-b21f-173b209be8a7"
                }
            ],
            "parameters": [
                {
                    "name": "Attribute",
                    "value": "true",
                    "key": "transcribeCall",
                    "namespace": null
                },
                {
                    "name": "Attribute",
                    "value": "true",
                    "key": "saveCallRecording",
                    "namespace": null
                },
                {
                    "name": "Attribute",
                    "value": "en-US",
                    "key": "languageCode",
                    "namespace": null
                }
            ],
            "metadata": {
                "position": {
                    "x": 101,
                    "y": 424
                }
            }
        },
        {
            "id": "99458f47-6941-48ce-9b90-fdf184759b22",
            "type": "Disconnect",
            "branches": [],
            "parameters": [],
            "metadata": {
                "position": {
                    "x": 789,
                    "y": 645
                }
            }
        },
        {
            "id": "97a964a7-5dd2-4c82-b21f-173b209be8a7",
            "type": "InvokeExternalResource",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "07273109-a75a-4742-aaae-ce35603c31fc"
                },
                {
                    "condition": "Error",
                    "transition": "3f9659a3-56a5-4f3c-a431-fd9da2306459"
                }
            ],
            "parameters": [
                {
                    "name": "FunctionArn",
                    "value": "arn:aws:lambda:us-east-1:126597142151:function:pd-test-3-kvsConsumerTrigger-1VMZGG6KHAFPB",
                    "namespace": null
                },
                {
                    "name": "TimeLimit",
                    "value": "8"
                }
            ],
            "metadata": {
                "position": {
                    "x": 102,
                    "y": 610
                },
                "dynamicMetadata": {},
                "useDynamic": false
            },
            "target": "Lambda"
        },
        {
            "id": "07273109-a75a-4742-aaae-ce35603c31fc",
            "type": "PlayPrompt",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "99458f47-6941-48ce-9b90-fdf184759b22"
                }
            ],
            "parameters": [
                {
                    "name": "Text",
                    "value": "<speak>\nThis is the sample flow to demonstrate customer audio streaming and recording in an Amazon Connect IVR. With this solution anything the customer says or any prompts to the customer will be recorded.\n<break time=\"1000ms\"/>\nTo demonstrate please tell me what city you are from?\n<break time=\"5000ms\"/>\nHow is the weather?\n<break time=\"5000ms\"/>\nThanks for using our solution goodbye.\n</speak>",
                    "namespace": null
                },
                {
                    "name": "TextToSpeechType",
                    "value": "ssml"
                }
            ],
            "metadata": {
                "position": {
                    "x": 98,
                    "y": 868
                },
                "useDynamic": false
            }
        },
        {
            "id": "856dd865-e5a0-49c6-aacc-55fe53c38a22",
            "type": "SetLoggingBehavior",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "d5bd7724-4436-4bfc-bd2a-d0bee26963a1"
                }
            ],
            "parameters": [
                {
                    "name": "LoggingBehavior",
                    "value": "Enable"
                }
            ],
            "metadata": {
                "position": {
                    "x": 186,
                    "y": 15
                }
            }
        },
        {
            "id": "d5bd7724-4436-4bfc-bd2a-d0bee26963a1",
            "type": "PlayPrompt",
            "branches": [
                {
                    "condition": "Success",
                    "transition": "6728609a-9707-41f7-a87c-30ac1fde4f4c"
                }
            ],
            "parameters": [
                {
                    "name": "Text",
                    "value": "<speak>\nThank you for using Amazon Connect IVR recording solution\n<break time=\"500ms\"/>\n</speak>",
                    "namespace": null
                },
                {
                    "name": "TextToSpeechType",
                    "value": "ssml"
                }
            ],
            "metadata": {
                "position": {
                    "x": 431,
                    "y": 16
                },
                "useDynamic": false
            }
        }
    ],
    "version": "1",
    "type": "contactFlow",
    "start": "856dd865-e5a0-49c6-aacc-55fe53c38a22",
    "metadata": {
        "entryPointPosition": {
            "x": 20,
            "y": 19
        },
        "snapToGrid": false,
        "name": "kvsStreamingFlow",
        "description": null,
        "type": "contactFlow",
        "status": "published",
        "hash": "04d2301ecb11791e58223235254397204821d729c44cb61720cac7b281179b1d"
    }
}